<!-- index.html -->

<!doctype html>
<html>
  <head>
    <title>Remove Background</title>
    <style>
      #original-image {
        width: 100%;
      }
      #processed-image {
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0;
      }
      #slider {
        width: 100%;
      }
    </style>
  </head>
  <body>
    <h1>Remove Background</h1>
    <form id="form">
      <input type="file" id="file-input" accept="image/*">
      <br>
      <img id="original-image" src="#" alt="Original Image">
      <img id="processed-image" src="#" alt="Processed Image">
      <br>
      <input type="range" id="slider" min="0" max="1" step="0.01" value="0">
      <br>
      <button type="button" id="download-button" disabled>Download</button>
    </form>
    <script>
      // Get the form, file input, original image, processed image, slider, and download button elements
      const form = document.getElementById("form");
      const fileInput = document.getElementById("file-input");
      const originalImage = document.getElementById("original-image");
      const processedImage = document.getElementById("processed-image");
      const slider = document.getElementById("slider");
      const downloadButton = document.getElementById("download-button");

      // Set up an event listener for the file input
      fileInput.addEventListener("change", (event) => {
        // Get the selected file
        const file = event.target.files[0];

        // Check if the file is an image
if (file.type.match(/image\/.*/)) {
  // Update the original image src and processed image src
  originalImage.src = URL.createObjectURL(file);
  processedImage.src = URL.createObjectURL(file);

  // Enable the download button
  downloadButton.disabled = false;

  // Set up an event listener for the form submission
  form.addEventListener("submit", (event) => {
    // Prevent the form from being submitted
    event.preventDefault();

    // Create a new FormData object
    const formData = new FormData();

    // Append the selected file to the FormData object
    formData.append("file", file);

    // Send a POST request to the /rembg endpoint with the selected file
    fetch("/rembg", {
      method: "POST",
      body: formData,
    }).then((response) => {
      // When the response is received, update the processed image src
      return response.text();
    }).then((processedDataUrl) => {
      processedImage.src = processedDataUrl;
    });
  });
} else {
  // If the file is not an image, show an error message
  alert("Please select an image file.");
}

